<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>05-02-reg-basic.utf8</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/duke-blue.css" rel="stylesheet" />
    <link href="libs/remark-css/hygge-duke.css" rel="stylesheet" />
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="../mycss/my-theme.css" type="text/css" />
    <link rel="stylesheet" href="../mycss/my-font.css" type="text/css" />
    <link rel="stylesheet" href="../mycss/my-custom-for-video-roomy.css" type="text/css" />
    <link rel="stylesheet" href="../mycss/text-box.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

background-image: url("../pic/slide-front-page.jpg")
class: center,middle
exclude: FALSE

# 统计学原理(Statistic)

&lt;!---    chakra: libs/remark-latest.min.js ---&gt;

### 胡华平

### 西北农林科技大学

### 经济管理学院数量经济教研室

### huhuaping01@hotmail.com

### 2021-05-18




<div>
<style type="text/css">.xaringan-extra-logo {
width: 110px;
height: 70px;
z-index: 0;
background-image: url(../pic/logo/nwafu-logo-circle-wb.png);
background-size: contain;
background-repeat: no-repeat;
position: absolute;
top:0.2em;left:1em;
}
</style>
<script>(function () {
  let tries = 0
  function addLogo () {
    if (typeof slideshow === 'undefined') {
      tries += 1
      if (tries < 10) {
        setTimeout(addLogo, 100)
      }
    } else {
      document.querySelectorAll('.remark-slide-content:not(.title-slide):not(.inverse):not(.hide_logo)')
        .forEach(function (slide) {
          const logo = document.createElement('div')
          logo.classList = 'xaringan-extra-logo'
          logo.href = null
          slide.appendChild(logo)
        })
    }
  }
  document.addEventListener('DOMContentLoaded', addLogo)
})()</script>
</div>

---
class: center, middle, duke-orange,hide_logo
name: chapter
exclude: FALSE

# 第五章 相关和回归分析


### [5.1 变量间关系的度量](#corl)

### [.white[5.2 回归分析的基本思想]](#concept)

### [5.3 OLS方法与参数估计](#ols)

### [5.4 假设检验](#hypthesis)

### [5.5 拟合优度与残差分析](#goodness)

### [5.6 回归预测分析](#forecast)

### [5.7 回归报告解读](#report)

---
layout: false
class: center, middle, duke-softblue,hide_logo
name: concept

# 5.2 回归分析的基本思想

### [相关关系VS因果关系](#basic-vs)

### [重要概念](#basic-important)


---
layout: true

&lt;div class="my-header-h2"&gt;&lt;/div&gt;

&lt;div class="watermark1"&gt;&lt;/div&gt;

&lt;div class="watermark2"&gt;&lt;/div&gt;

&lt;div class="watermark3"&gt;&lt;/div&gt;

&lt;div class="my-footer"&gt;&lt;span&gt;huhuaping@  &amp;emsp;&amp;emsp; &lt;a href="#chapter"&gt; 第05章 相关和回归分析 &lt;/a&gt;
&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;
&lt;a href="#concept"&gt; 5.2 回归分析的基本思想 &lt;/a&gt; &lt;/span&gt;&lt;/div&gt; 

---

## 线性回归分析

从一组样本数据出发，确定变量之间的数学关系式。

对这些关系式的可信程度进行各种统计检验，并从影响某一特定变量的诸多变量中找出哪些变量的影响显著，哪些不显著。

利用所求的关系式，根据一个或几个变量的取值来预测或控制另一个特定变量的取值，并给出这种预测或控制的精确程度。


---

name: basic-vs

## 相关关系：边际相关与条件相关1

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../pic/chpt05-causality-margin.png" alt="边际相关但是条件独立" width="90%" /&gt;
&lt;p class="caption"&gt;边际相关但是条件独立&lt;/p&gt;
&lt;/div&gt;

---

## 相关关系：边际相关与条件相关2

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../pic/chpt05-causality-margin-2.png" alt="边际独立但是条件相关" width="90%" /&gt;
&lt;p class="caption"&gt;边际独立但是条件相关&lt;/p&gt;
&lt;/div&gt;

---

## 相关关系VS因果关系


&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../pic/chpt05-causality-chocolate.png" alt="巧克力消费量与诺贝尔奖数量" width="60%" /&gt;
&lt;p class="caption"&gt;巧克力消费量与诺贝尔奖数量&lt;/p&gt;
&lt;/div&gt;

---

## 相关关系VS因果关系：性别的作用

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../pic/chpt05-causality-drug-gender1.png" alt="治疗康复表" width="95%" /&gt;
&lt;p class="caption"&gt;治疗康复表&lt;/p&gt;
&lt;/div&gt;

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../pic/chpt05-causality-drug-gender-graph1.png" alt="因果关系图" width="60%" /&gt;
&lt;p class="caption"&gt;因果关系图&lt;/p&gt;
&lt;/div&gt;

---

## 相关关系VS因果关系：血压的作用

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../pic/chpt05-causality-drug-pressure-tab.png" alt="治疗康复表" width="100%" /&gt;
&lt;p class="caption"&gt;治疗康复表&lt;/p&gt;
&lt;/div&gt;

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../pic/chpt05-causality-drug-pressure-graph.png" alt="因果关系图" width="60%" /&gt;
&lt;p class="caption"&gt;因果关系图&lt;/p&gt;
&lt;/div&gt;

---
exclude: true

## （案例）微型家庭总体

&lt;!---新数据表---&gt;


```
Warning: The `x` argument of `as_tibble.matrix()` must have unique column names if `.name_repair` is omitted as of tibble 2.0.0.
Using compatibility `.name_repair`.
```


---

### （案例）假想总体：60个家庭的收支数据（直观列表）


&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../pic/extra/chpt2-1-60families-pop.png" alt="60个家庭的收入和支出情况：假设的总体" width="754" /&gt;
&lt;p class="caption"&gt;60个家庭的收入和支出情况：假设的总体&lt;/p&gt;
&lt;/div&gt;

???
提问：

- 总体是什么？

- 有多少总体单位？

---

### （案例）假想总体：60个家庭的收支数据（扁数据形态）


<div id="htmlwidget-ed3b85075a8362804e0a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ed3b85075a8362804e0a">{"x":{"filter":"none","caption":"<caption>60个家庭的收入和支出情况：假设的总体<\/caption>","data":[["1","2","3","4","5","6","7","8"],["X","Y1","Y2","Y3","Y4","Y5","Y6","Y7"],[80,55,60,65,70,75,null,null],[100,65,70,74,80,85,88,null],[120,79,84,90,94,98,null,null],[140,80,93,95,103,108,113,115],[160,102,107,110,116,118,125,null],[180,110,115,120,130,135,140,null],[200,120,136,140,144,145,null,null],[220,135,137,140,152,157,160,162],[240,137,145,155,165,175,189,null],[260,150,152,175,178,180,185,191]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Mark<\/th>\n      <th>G1<\/th>\n      <th>G2<\/th>\n      <th>G3<\/th>\n      <th>G4<\/th>\n      <th>G5<\/th>\n      <th>G6<\/th>\n      <th>G7<\/th>\n      <th>G8<\/th>\n      <th>G9<\/th>\n      <th>G10<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","columnDefs":[{"className":"dt-center","targets":"_all"},{"visible":false,"targets":0},{"orderable":false,"targets":0}],"pageLength":9,"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[9,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
???
**扁数据形态**：“非标准”数据形态（但很直观）

---

### （案例）假想总体：60个家庭的收支数据（长数据形态）

<div id="htmlwidget-0e920fcea78820b56fe7" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-0e920fcea78820b56fe7">{"x":{"filter":"none","caption":"<caption>60个家庭的收入和支出情况：假设的总体<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],[1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,4,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,8,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,10],[80,80,80,80,80,100,100,100,100,100,100,120,120,120,120,120,140,140,140,140,140,140,140,160,160,160,160,160,160,180,180,180,180,180,180,200,200,200,200,200,220,220,220,220,220,220,220,240,240,240,240,240,240,260,260,260,260,260,260,260],[55,60,65,70,75,65,70,74,80,85,88,79,84,90,94,98,80,93,95,103,108,113,115,102,107,110,116,118,125,110,115,120,130,135,140,120,136,140,144,145,135,137,140,152,157,160,162,137,145,155,165,175,189,150,152,175,178,180,185,191]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>group<\/th>\n      <th>X<\/th>\n      <th>Y<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"tip","columnDefs":[{"className":"dt-center","targets":"_all"},{"visible":false,"targets":0},{"orderable":false,"targets":0}],"pageLength":8,"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[8,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
???
**长数据形态**：标准数据形态（但不直观）。

---
name: basic-important

## 重要概念：无条件概率和无条件期望

**无条件概率**：

- 定义：不受
`\(X_i\)`变量取值影响下，
`\(Y_i\)`出现的可能性。

- 记号：离散变量
`\(P(Y_i)\)`；连续变量
`\(g(Y)\)`

**无条件期望**：

- 定义：不受
`\(X_i\)`变量取值影响下，变量
`\(Y_i\)`的期望值。

- 记号：
`\(g(Y_i)\)`表示连续变量的概率密度函数（cdf）

`$$\begin{align}
E(Y) &amp;= \sum_1^N{Y_i \cdot P(Y_i)} &amp;&amp;\text{(discrete vars)} \\
E(Y) &amp;= \int{Y_i \cdot g(Y_i)dY} &amp;&amp;\text{(continue vars)} 
\end{align}$$`

---

### （示例）无条件概率和无条件期望的示例计算


&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../pic/extra/chpt2-1-60fams-unconditional-mean.png" alt="无条件概率和无条件期望" width="90%" /&gt;
&lt;p class="caption"&gt;无条件概率和无条件期望&lt;/p&gt;
&lt;/div&gt;

---

### （示例）无条件期望的计算过程

`$$\begin{align}
E(Y) &amp;= \sum_1^N{Y_i \cdot P(Y_i)} \\
     &amp;= \sum_1^{60}\left( 55*\frac{1}{60} + 60*\frac{1}{60} + \cdots + 191*\frac{1}{60} \right) \\
     &amp;=\frac{1}{60}\sum_1^{60}Y_i\\
     &amp;=\frac{7272}{60}\\
     &amp;=121.2
\end{align}$$`

---

## 重要概念：条件概率和条件期望

**条件概率**：

- 定义：给定变量
`\(X_i\)`的取值条件下，
`\(Y_i\)`出现的可能性。

- 记号：离散变量
`\(P(Y_i|X_i)\)`；连续变量
`\(g(Y|X)\)`


**条件期望**：

- 在给定变量
`\(X_i\)`的取值条件下，
`\(Y_i\)`的期望值。

- 记号：
`\(g(Y|X)\)`表示连续变量的条件概率密度函数（cdf）

`$$\begin{align}
E(Y|X_i) &amp;= \sum_1^N{(Y_i|X_i) \cdot P(Y_i|X_i)} &amp;&amp;\text{(discrete vars)} \\
E(Y|X_i) &amp;= \int{(Y|X) \cdot g(Y|X)dY} &amp;&amp;\text{(continue vars)} \end{align}$$`

---

### （示例）条件概率和条件期望的计算

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../pic/extra/chpt2-1-60fams-conditional-mean.png" alt="条件概率和条件期望" width="90%" /&gt;
&lt;p class="caption"&gt;条件概率和条件期望&lt;/p&gt;
&lt;/div&gt;

---

### （示例）条件期望的计算过程

`$$\begin{align}
E(Y|80) &amp;= \sum_1^N{Y_i \cdot P(Y_i|X=80)} \\
     &amp;= \sum_1^{5}\left( 55*\frac{1}{5} + 60*\frac{1}{5} + \cdots + 75*\frac{1}{5} \right) \\
     &amp;=\frac{1}{5}\sum_1^{5}Y_i\\
     &amp;=\frac{325}{5}\\
     &amp;=65
\end{align}$$`

---

### （示例）假想总体的全部数据展示


&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-16-1.png" width="90%" style="display: block; margin: auto;" /&gt;


---

### （示例）给定不同X水平下Y条件期望值

&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-17-1.png" style="display: block; margin: auto;" /&gt;


&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; var &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; G1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; G2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; G3 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; G4 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; G5 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; G6 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; G7 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; G8 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; G9 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; G10 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; X &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 120 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 180 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 200 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 220 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 260 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; E(Y|X) &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 77 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 89 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 101 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 113 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 125 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 137 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 149 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 161 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 173 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

### （示例）给定不同X水平下Y条件期望值

&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-19-1.png" width="90%" style="display: block; margin: auto;" /&gt;

给定
`\(X=120\)`水平下
`\(Y\)`条件期望值
`\(E(Y|X_i=120)\)`= 89

---

### （示例）X均值和Y的无条件期望值

&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-20-1.png" width="90%" style="display: block; margin: auto;" /&gt;

X的均值
`\(\bar{X}\)`
=173.67和Y的无条件期望值
`\(E(Y)=\)`
121.20

---

## 重要概念：总体回归线（PRL）

- 几何：给定X值时Y的条件期望值的轨迹。

- 统计：实质上就是Y对X的回归。

总体回归曲线(Population Regression Curve，PRC)：条件期望值的轨迹表现为一条曲线(Curve)。

总体回归线(Population Regression Line，PRL)：条件期望值的轨迹表现为一条直线(Line)。

---

## 重要概念：总体回归线（PRL）

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-21-1.png" alt="总体回归线PRL" width="90%" /&gt;
&lt;p class="caption"&gt;总体回归线PRL&lt;/p&gt;
&lt;/div&gt;

---

## 重要概念：总体回归函数（PRF）

总体回归函数（Population Regression Function，PRF）：它是对总体回归曲线(PRC)的数学函数表现形式。

如果不知道总体回归曲线的具体形式，则总体回归函数PRF表达为如下隐函数形式（PRF）：

`$$\begin{align}
E(Y|X_i) &amp; = f(X_i)  &amp;&amp; \text{(PRF)}
\end{align}$$`

如果总体回归曲线是直线形式，则总体回归函数PRF表达为如下显函数形式（PRF_L）：

`$$\begin{align}
E(Y|X_i) &amp;= \beta_1 +\beta_2X_i &amp;&amp; \text{(PRF_L)}
\end{align}$$`

- 
`\(\beta_1,\beta_2\)`分别称为截距(intercept)和斜率系数(slope coefficient)。

- 
`\(\beta_1,\beta_2\)`称为总体参数或回归系数(regression coefficients)。

- 
`\(\beta_1,\beta_2\)`为未知但却是固定的参数。

---

## 重要概念：总体回归函数（PRF）

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-22-1.png" alt="总体回归线PRL与总体回归函数PRF" width="90%" /&gt;
&lt;p class="caption"&gt;总体回归线PRL与总体回归函数PRF&lt;/p&gt;
&lt;/div&gt;

---

## 重要概念：总体回归模型（PRM）

**总体回归模型**（Population Regression model, PRM）：把总体回归函数表达成**随机设定**形式。

如果总体回归函数为隐函数，则**总体回归模型**记为：

`$$\begin{align}
Y_i &amp;=  E(Y|X_i) + u_i \\
    &amp;=  f(X_i) +u_i
\end{align}$$`

如果总体回归函数为线性函数，则**总体回归模型**记为：

`$$\begin{align}
Y_i &amp;=  E(Y|X_i) + u_i \\
    &amp;= \beta_1 +\beta_2X_i + u_i
\end{align}$$`

- 总体回归模型（PRM）属于**计量经济学模型**，而总体回归函数（PRF）是**数量经济学模型**（或数学模型）。

- 总体回归模型（PRM）能充分表达的是现实世界中
`\(Y_i\)`变量的行为特征。


---

## 重要概念：随机干扰项

总体回归模型（PRM）设定下，
`\(Y_i\)`将由两个部分组成。

- 特定家庭的支出（
`\(Y_i\)`） = 系统性部分（
`\(E(Y|X_i)\)` + 随机部分（
`\(u_i\)`）

- 特定家庭的支出（
`\(Y_i\)`） = 系统性部分（
`\(\beta_1+\beta_2X_i\)`） + 随机部分（
`\(u_i\)`）


**随机干扰项**：

- 也被称为随机误差项(stochastic error term)：总体回归函数中忽略掉的但又影响着Y的全部变量的替代物，它是
`\(Y_i\)`与条件期望（
`\(E(Y|X_i)\)`）的离差。

`$$\begin{align}
u_i &amp;= Y_i - E(Y|X_i) 
\end{align}$$`

---

## 重要概念：随机干扰项

随机干扰项的来源：

- 理论的含糊：除了主变量之外，还有其它变量的影响，但不清楚，只能用𝜇_𝑖代替它们。（家庭收入以外？）

- 数据的不充分：可能知道被忽略的变量，但不能得到这些变量的数量信息。（如家庭财富数据不可得）

- 核心变量与其它变量：其它变量全部或其中一些合起来影响还是很小的。（如子女、教育、性别、宗教等）

- 人类行为的内在随机性。（客观存在、固有的）

- 变量被“移花接木”而产生测量误差（如弗里德曼的持久收入和消费）

- 节省原则：为了保持一个尽可能简单的回归模型

- 错误的函数形式：有时根据数据及经验无法确定一个正确的函数形式 （多元回归尤其如此）

---

## 重要概念：随机干扰项


.pull-left[
为何是“随机的”？

- 测不准？（误差）

- 测错了？（误导）

- 免不了!（内在性）

]

.pull-right[

拥抱随机世界

- 风筝：
`\(Y_i\)`

- 风筝线：
`\(E(Y|X_i)\)`

- 风：
`\(u_i\)`

]


---

## 重要概念：理解PRM和PRF的关系

&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-23-1.png" width="90%" style="display: block; margin: auto;" /&gt;

若给定一个特定家庭
`\((X_i=120, Y_i=79)\)`，则条件期望为
`\(E(Y|120)=89\)`


---

## 重要概念：理解PRM和PRF的关系

若给定
`\(X_i=120\)`，则5个家庭的真实消费支出分别为：

`$$\begin{align}
(Y_1|X=120) = 79 &amp;= \beta_1 + \beta_2 \cdot 120 +u_1\\
(Y_2|X=120) = 84 &amp;= \beta_1 + \beta_2 \cdot 120 +u_2\\
(Y_3|X=120) = 90 &amp;= \beta_1 + \beta_2 \cdot 120 +u_3\\
(Y_4|X=120) = 94 &amp;= \beta_1 + \beta_2 \cdot 120 +u_4\\
(Y_5|X=120) = 98 &amp;= \beta_1 + \beta_2 \cdot 120 +u_5
\end{align}$$`


---

## 重要概念：理解PRM和PRF的关系

主要结论：

- 总体期望刻画总体的“趋势”，总体回归线让“趋势”直观化。

- 个体随机性是不可避免的，总会“游离”于“趋势”之外。

- 随机干扰项
`\(u_i\)`𝑖携带了随机个体的“游离”信息。

- 总体回归模型既“提取”了趋势和规律性，又“维系”着个体随机性，从而更好地表达了“真实世界”。

课后思考：

- 如果是无限总体，总体的规律性在理论上也是可以被严格表达出来么？

- 如果不告诉你总体，你怎么知道“触碰”到的是“真实的”趋势/规律？

- 从假想的60个家庭的微型总体中，“随便”抽取10个家庭的数据，你还能看到“直线”趋势么？


---

## 重要概念：“线性”的含义

“线性回归模型”中“线性”一词的含义

- **变量“线性”模型**：因变量对于自变量是线性的。

- **参数“线性”模型**：因变量对于参数是线性的。

---

### （测试题）“线性”的含义

下列模型分别属于哪一类？请指出来：

`$$\begin{align}
Y_i &amp;= \beta_1 + \beta_2 X_i +u_i &amp;&amp; \text{(mod1)}
\end{align}$$`

`$$\begin{align}
Y_i &amp;= \beta_1 + \beta_2 X_i + \beta_3 X_i^2 +u_i &amp;&amp; \text{(mod2)}
\end{align}$$`

`$$\begin{align}
Y_i &amp;= \beta_1 + \beta_2 X_i + \beta_3 X_i^2 + \beta_4 X_i^3 +u_i &amp;&amp; \text{(mod3)}
\end{align}$$`

`$$\begin{align}
Y_i &amp;= \beta_1 + \beta_2 \frac{1}{X_i} +u_i &amp;&amp; \text{(mod4)}
\end{align}$$`


`$$\begin{align}
Y_i &amp;= \beta_1 + \beta_2 ln(X_i) +u_i &amp;&amp; \text{(mod5)} \\
\end{align}$$`



`$$\begin{align}
ln(Y_i) &amp;= \beta_1 + \beta_2 X_i +u_i &amp;&amp; \text{(mod6)}
\end{align}$$`

---

### （测试题）“线性”的含义

下列模型分别属于哪一类？请指出来：

`$$\begin{align}
ln(Y_i) &amp;= \beta_1 - \beta_2 \frac{1}{X_i} +u_i &amp;&amp; \text{(mod7)} 
\end{align}$$`


`$$\begin{align}
ln(Y_i) &amp;= ln(\beta_1) + \beta_2 ln(X_i) +u_i &amp;&amp; \text{(mod8)} 
\end{align}$$`


`$$\begin{align}
Y_i &amp;= \frac{1}{1+e^{(\beta_1 + \beta_2 X_{2i}  +u_i) }} &amp;&amp; \text{(mod9)}
\end{align}$$`


`$$\begin{align}
Y_i &amp;= \beta_1 +(0.75-\beta_1)e^{-\beta_2(X_i-2)} +u_i &amp;&amp; \text{(mod10)}
\end{align}$$`


`$$\begin{align}
Y_i &amp;= \beta_1 + \beta_2^3 X_i +u_i &amp;&amp; \text{(mod11)} 
\end{align}$$`

---

## 重要概念：样本回归线(SRL)

**样本(Sample)**：

- 从总体中随机抽取得到的数据。

**样本回归线**(Sample Regression Line，SRL)：

- 是通过拟合**样本数据**得到的一条曲线（或直线）。换言之，这条线由拟合值
`\(\hat{Y}_i\)`连接而成。

- 
`\(\hat{Y}_i\)`是对条件期望值
`\(Y|X_i\)`的拟合。

- 拟合方法有很多，例如采用OLS方法对样本数据进行拟合。

    - 尽可能拟合数据
    - 用什么方法拟合？
    - 曲线是什么形态？


---

## 重要概念：样本回归函数(SRF)

**样本回归函数**(Sample Regression Function，SRF)：是样本回归曲线的数学函数形式，可是是线性的或非线性。如果是直线则可以写成：

`$$\begin{align}
\hat{Y}_i =\hat{\beta}_1 + \hat{\beta}_2X_i
\end{align}$$`

对比总体回归函数（PRF）：

`$$\begin{align}
E(Y|X_i) =\beta_1 + \beta_2X_i
\end{align}$$`

可以认为：

- 
`\(\hat{Y}_i\)`是对
`\(E(Y|X_i)\)`的估计量。

- 
`\(\hat{\beta}_1\)`是对
`\(\beta_1\)`的估计量。

- 
`\(\hat{\beta}_2\)`是对
`\(\beta_2\)`的估计量。

---

### （示例）第一份随机样本：抽样




&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-25-1.png" style="display: block; margin: auto;" /&gt;

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; var &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n3 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n4 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n5 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n6 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n7 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n8 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n9 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n10 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; X &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 120 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 180 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 200 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 220 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 260 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 88 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 93 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 107 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 157 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 165 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 185 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

### （示例）第一份随机样本：数据

&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-27-1.png" style="display: block; margin: auto;" /&gt;

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; var &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n3 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n4 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n5 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n6 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n7 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n8 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n9 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n10 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; X &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 120 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 180 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 200 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 220 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 260 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 88 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 93 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 107 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 157 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 165 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 185 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

### （示例）第一份随机样本：SRL




&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-30-1.png" style="display: block; margin: auto;" /&gt;

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; var &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n3 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n4 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n5 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n6 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n7 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n8 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n9 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n10 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; X &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 120 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 180 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 200 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 220 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 260 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 88 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 93 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 107 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 157 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 165 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 185 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

### （示例）第一份随机样本：SRF

根据第一份随机样本拟合得到的**样本回归函数**SRF：

`$$\begin{equation} \begin{alignedat}{999} &amp;\widehat{Y}=&amp;&amp;+13.38&amp;&amp;+0.64X\\ \end{alignedat} \end{equation}$$`

样本数据如下：

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; var &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n3 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n4 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n5 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n6 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n7 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n8 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n9 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n10 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; X &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 120 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 180 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 200 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 220 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 260 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 88 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 93 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 107 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 157 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 165 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 185 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---

### （示例）第二份随机样本：抽样



&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-35-1.png" style="display: block; margin: auto;" /&gt;

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; var &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n3 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n4 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n5 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n6 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n7 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n8 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n9 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n10 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; X &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 120 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 180 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 200 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 220 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 260 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 108 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 125 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 135 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 136 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 135 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 155 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 178 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---

### （示例）第二份随机样本：数据


&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-37-1.png" style="display: block; margin: auto;" /&gt;

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; var &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n3 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n4 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n5 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n6 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n7 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n8 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n9 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n10 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; X &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 120 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 180 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 200 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 220 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 260 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 108 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 125 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 135 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 136 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 135 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 155 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 178 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

### （示例）第二份随机样本：SRL




&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-40-1.png" style="display: block; margin: auto;" /&gt;

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; var &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n3 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n4 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n5 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n6 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n7 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n8 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n9 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n10 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; X &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 120 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 180 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 200 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 220 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 260 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 108 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 125 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 135 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 136 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 135 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 155 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 178 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

### （示例）第二份随机样本：SRF

根据第二份随机样本拟合得到的**样本回归函数**SRF：


`$$\begin{equation} \begin{alignedat}{999} &amp;\widehat{Y}=&amp;&amp;+14.59&amp;&amp;+0.61X\\ \end{alignedat} \end{equation}$$`


样本数据如下：

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; var &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n3 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n4 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n5 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n6 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n7 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n8 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n9 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n10 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; X &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 120 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 180 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 200 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 220 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 260 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 108 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 125 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 135 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 136 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 135 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 155 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 178 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

### （示例）两份样本同时出现



&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-45-1.png" style="display: block; margin: auto;" /&gt;


---

## 重要概念：样本回归模型（SRM）

样本回归模型（Sample Regression Model，SRM）：把样本回归函数表现为**“随机”**形式。

- 如果样本回归函数为隐函数，则样本回归模型可记为：

`$$\begin{align}
Y_i &amp;= g(X_i) +e_i 
\end{align}$$`

- 如果样本回归函数表现为直线，则样本回归模型可记为：

`$$\begin{align}
Y_i &amp;= \hat{\beta}_1 +\hat{\beta}_2X_i +e_i &amp;&amp; \text{(SRM_L)}
\end{align}$$`

其中，
`\(e_i\)`表示残差（Residual）

---

## 重要概念：残差

残差（Residual）：

- 定义：是样本回归函数与Y的样本观测值之间的离差。

- 记号：

`$$\begin{align}
e_i  &amp;= Y_i - \hat{Y}_i \\
     &amp;= Y_i - (\hat{\beta}_1 +\hat{\beta}_2X_i) 
\end{align}$$`

---

## 重要概念：理解SRF和SRM的关系

&lt;img src="05-02-reg-basic_files/figure-html/unnamed-chunk-46-1.png" style="display: block; margin: auto;" /&gt;

给定
`\(x_i=240\)`，样本2的观测值
`\(Y_i=240\)` ；拟合值
`\(\hat{Y}_i=\)` 161.6；残差
`\(e_i=Y_i- \hat{Y}_i=\)` -6.6。

---

## 重要概念：样本回归与总体回归的比较

&lt;img src="../pic/extra/chpt2-1-PRL-SRL.png" width="651" style="display: block; margin: auto;" /&gt;

--

为何不同？继承性和变异性


---

## 重要概念：样本回归与总体回归的比较

.pull-left[

.fl.ma2.pa2.bg-lightest-blue[

总体回归函数PRF:

`$$\begin{align}
E(Y|X_i) &amp;= \beta_1 +\beta_2X_i &amp;&amp; \text{(PRF)}
\end{align}$$`

总体回归模型PRM:

`$$\begin{align}
Y_i &amp;=  \beta_1 +\beta_2X_i + u_i &amp;&amp; \text{(PRM)}
\end{align}$$`

]

]


.pull-right[

.fl.ma2.pa2.bg-light-green[
样本回归函数SRF:

`$$\begin{align}
\hat{Y}_i =\hat{\beta}_1 + \hat{\beta}_2X_i &amp;&amp; \text{(SRF)}
\end{align}$$`

样本回归模型SRM:

`$$\begin{align}
Y_i &amp;= \hat{\beta}_1 + \hat{\beta}_2X_i +e_i &amp;&amp; \text{(SRM)}
\end{align}$$`
]

]

--

思考：

- PRF无法直接观测，只能用SRF近似替代

- 估计值与观测值之间存在偏差

- SRF又是怎样决定的呢?


---

## 重要概念：样本回归与总体回归的比较


总结：

- 随机抽样数据继承了总体的特征。

- 利用随机样本进行数据拟合是对总体规律的“反向追踪”。

- 样本回归模型中的残差是拟合不完全的产物。

--

思考：

- 怎样来判定对随机样本的一次数据拟合是更优的？

- 存不存在一种“最优”的拟合方法？

--

课后作业：

- 请把162名同学的拟合线进行平均化处理（截距和斜率取均值），绘制得到一条“回归线”。

- 你认为是这根平均化的“回归线”与真相更逼近么？

---
layout:false
background-image: url("../pic/thank-you-gif-funny-little-yellow.gif")
class: inverse,center
# 本节结束
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
