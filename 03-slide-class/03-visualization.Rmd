---
output:
  xaringan::moon_reader:
    seal: false
    lib_dir: libs
    css: 
      - default
      - default-fonts
      - duke-blue
      - hygge-duke
      - ../mycss/my-custom-for-video.css
      - ../mycss/notes-tips.css
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
---
background-image: url("../pic/slide-front-page.jpg")
class: center,middle

# 统计学原理(Statistic)

<!---    chakra: libs/remark-latest.min.js --->

### 胡华平

### 西北农林科技大学

### 经济管理学院数量经济教研室

### huhuaping01@hotmail.com

### `r Sys.Date()`

```{r global_options, echo=F,message=FALSE,warning=F}
source("../R/set-global.R")

```


```{r ex-math-eq}
source("../R/external-math-equation.R")
```


---
class: inverse, center, middle
# 第三章 数据的图表展示


[3.1 数据的预处理](#prepare)

[3.2 品质数据的整理与显示](#quality)

[3.3 数值型数据的整理与显示](#quantity)

[3.4 合理使用图表](#nice)


---
layout: false
class: inverse, center, middle, duke-softblue
name: prepare

# 3.1 数据的预处理

数据清洗（data cleaning ）

数据变换（data transformation）

数据子集(data subset)


---
layout: true

<div class="my-header-h2"></div>

<div class="watermark1"></div>

<div class="watermark2"></div>

<div class="watermark3"></div>

<div class="my-footer"><span>huhuaping@  &emsp;&emsp; <a href="#chapter02"> 第03章 数据的图表展示 </a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
<a href="#prepare"> 3.1 数据的预处理 </a> </span></div> 

---

### 数据清洗：清单

以**调查问卷数据**的清洗为例：

- 真实性的清洗：要确认数据来自于受访者。 

- 完整性的清洗：主要看样本无应答，也就是一整份问卷没有应答。以及选项无应答，也就是应该应答的访题没有应答。 

- 可用性的清洗：主要是看编码是否完成，权数是否可行，以及缺失值如何标记和处理。

- 错误性的清洗：主要是清洗调查环节的错误，比如样本错误、应答人错误、应答方式错误。

---

### 数据清洗：案例（变量视图）


```{r}
customer_data<- readRDS("../data-analysis/custdata.RDS") %>%
  as_tibble() %>%
  add_column(id = 1:nrow(.), .before = "custid")
N <- nrow(customer_data)
names_eng <- names(customer_data)
names_chn <-c("样本编号","客户编号", "性别", "雇佣情况", "收入","婚姻状况","医保情况",
              "住房情况", "迁徙情况","机动车数量", "年龄", "所在州","油费")
vars_list<- tibble(`序号`= 1:length(names_chn),`变量名`=names_eng, `变量含义` = names_chn)
```

```{r}
vars_list %>% 
  datatable(caption = str_c("变量数k=", nrow(.)),
    options = list(pageLength = 6, dom = "tip"))
```

---

### 数据清洗：案例（数据视图）


```{r}

customer_data %>% 
  select(-custid) %>%
  head(500) %>%
  arrange(id) %>%
  datatable(caption = str_c("样本数n=", nrow(customer_data)),
            options = list(pageLength = 5, dom = "tip"))
```

---

### 数据清洗：案例（问题——编码混乱）

`gas_usage`变量表示用油支出。数据编码存在两个问题：

- 混合了数值和字符：
    - 1表示包含在电子支付中；2表示包含在出租或分户中；3表示没有用油
    - 004-999表示用油支出数（美元）

- 有缺失值
    - NA表示缺失

```{r }
summary(customer_data$gas_usage)
```

---

### 数据清洗：案例（办法——构建新变量）

```{r}
# Treating the gas_usage variable
customer_data <- customer_data %>%
  mutate(gas_with_rent = (gas_usage == 1),
         gas_with_electricity = (gas_usage == 2),
         no_gas_bill = (gas_usage == 3) ) %>%
  mutate(gas_usage_new = ifelse(gas_usage < 4, NA, gas_usage))

list_sel <- c("id", "gas_usage", "gas_usage_new","gas_with_rent", "gas_with_electricity","no_gas_bill")
customer_data %>%
  select(one_of(list_sel)) %>%
  head(500) %>%
  datatable(options = list(pageLength = 5, dom = "tip"))
```

---

### 数据清洗：案例（问题——数据范围失常）

- age 年龄。存在取值为0，或大于100的情形
- income 收入。存在取值<=0。


```{r}
summary(customer_data[,c("age", "income")])
```

---

### 数据清洗：案例（办法：处理异常值数据范围失常）

- age取值为0，则转换为缺失值NA
- income取值为0，则转换为缺失值NA

```{r}
# Treating the age and income variables
customer_data <- customer_data %>%
   mutate(age_new = na_if(age, 0),
          income_new = ifelse(income < 0.001, NA, income))

list_sel <- c("id", "age", "age_new","income","income_new")
customer_data %>%
  select(one_of(list_sel)) %>%
  filter(age==0 ,income <0.001) %>%
  #sample_n(500) %>%
  datatable(options = list(pageLength = 5, dom = "tip"))
```

---

### 数据清洗：案例（办法1：处理缺失值）

处理缺失值最简单粗暴的办法就是直接删除行或列，但是这样也会直接去掉很多样本信息：

- 行删除(row delete)
- 列删除(column delete)

```{r}
include_graphics("../pic/chpt03-removingNAs.png")
```


---

### 数据清洗：案例（办法2：给缺失值加标签）

对于分类变量的缺失值，可以直接加一个特定标签（level）

```{r}
include_graphics("../pic/chpt03-missingCats.png", dpi= 100)
```

---

### 数据清洗：案例（办法3：给缺失值补值）

对于数值型变量的缺失值，可以给缺失值进行**补值**：

- 用均值代替
- 使用各种插值办法

---

### 数据清洗：案例（办法3：给缺失值补值）

```{r}
include_graphics("../pic/chpt03-addIsBad.png",dpi=100)
```

> 补值后，一定要记得新增加1个变量，指明哪些样本进行了补值操作！

---

### 数据清洗：案例（办法3：缺失值补值工具）

采用`R`包`vtreat`，最数据集进行自动补值处理：

```{r}
varlist <- setdiff(colnames(customer_data), c("custid", "health_ins"))

# Creating and applying a treatment plan
#install.packages("vtreat")
require("vtreat")
treatment_plan <- design_missingness_treatment(customer_data, varlist = varlist)
training_prepared <- prepare(treatment_plan, customer_data)

```

.pull-left[

处理前数据集`customer_data`的变量：

.scroll-box-14[
```{r}
names(customer_data)
```
]
]

.pull-right[

处理后`training_prepared`的变量：

.scroll-box-14[

```{r}
names(training_prepared)
```

]

]

---

### 数据清洗：案例（办法3：缺失值补值工具）

补值工具**处理前**的数据缺失情况：

```{r}
htmissing <- which(is.na(customer_data$housing_type))
                                        
columns_to_look_at <- c("id", "is_employed", "num_vehicles",
                           "housing_type", "health_ins")
                                        
customer_data[htmissing, columns_to_look_at] %>% 
  head() %>%
  datatable()

 
```

---

### 数据清洗：案例（办法3：缺失值补值工具）

补值工具**处理后**的数据补齐情况：

```{r}
columns_to_look_at <- c("id", "is_employed", "is_employed_isBAD",
                       "num_vehicles","num_vehicles_isBAD",
                       "housing_type", "health_ins")
                                        
training_prepared[htmissing, columns_to_look_at] %>%  
  head() %>%
  datatable() %>%
  formatRound(columns = c(2,4), digits = 2)
```




---

### 数据变换：清单

数据变换主要目的是为让数据能更适合于建模分析（modeling）。主要变换操作包括：

- 中位数/均值变换

- 对数化变换
$ln(X_i)$：

- 标准化变换
$\frac{(X_i -\bar{X})}{S_{X}}$

- 把**连续变量**转换为**离散变量**


---

### 数据变换：案例（收入变量：原始数据）

假设各个州的**收入的中位数**数据集如下：

```{r}
median_income_table <- read_rds("../data-analysis/median_income.RDS")
median_income_table %>%
  datatable(options = list(pageLength = 5, dom = "tip"))

```

---

### 数据变换A：案例（收入变量：中位数变换后）

把收入的州数据集（`median_income_table`）与前面的案例数据集（`training_prepared`）组合起来，并对收入进行中位数变换
$income\_normalized  =\frac{income_i}{median\_income}$：

```{r}

training_prepared <-  training_prepared %>%
  left_join(., median_income_table, by="state_of_res") %>%
  mutate(income_normalized = income/median_income) 

vars_sel <- c("id","income", "median_income", "income_normalized")

training_prepared %>%
  select(one_of(vars_sel)) %>%
  head(500) %>%
  datatable(options = list(pageLength = 5 , dom = "tip")) %>%
  formatRound(columns = c(4), digits =4)

```

---

### 数据变换A：案例（收入变量：中位数变换前后）

- 变换前收入变量(`income`)的情况

```{r}

summary(training_prepared$income)
```

- 中位数变换后收入变量(`income_normalized`)的情况

```{r}
summary(training_prepared$income_normalized)
```

---

### 数据变换A：案例（年龄变量：均值变换前后）

```{r, message=F, error=FALSE,warning=F}
mean_age <- round(mean(training_prepared$age, na.rm = T),2)
sd_age <- round(sd(training_prepared$age, na.rm = T),2)
```


同理，我们也可以用均值来处理变换操作。例如
$age\_normalized = \frac{age_i}{\overline{age}}$，其中年龄的均值
$\overline{age}=$ `r mean_age`岁。

```{r, message=F, error=FALSE,warning=F}
training_prepared <- training_prepared %>%
  mutate(age_normalized = age/mean_age,
         age_scaled = (age- mean_age)/sd_age,
         Ln_income =log10(income))

vars_sel <- c("id","age",  "age_normalized")
training_prepared %>%
  select(one_of(vars_sel)) %>%
  head(500) %>%
  datatable(options = list(pageLength = 5 , dom = "tip")) %>%
  formatRound(columns = c(3), digits =4)


```

---

### 数据变换A：案例（年龄变量：均值变换前后）

- 变换前年龄变量(`age`)的情况

```{r}

summary(training_prepared$age)
```

- **均值**变换后年龄变量(`age_normalized`)的情况

```{r}
summary(training_prepared$age_normalized)
```

---

### 数据变换B：案例（年龄变量：标准化变换）

下面我们进一步用标准化操作，对年龄变量进行变换
$age\_scaled= \frac{age_i - \overline{age}}{sd_{age}}$，其中年龄的均值
$\overline{age}=$ `r mean_age`岁；年龄的标准差
$sd_{age}=$ `r sd_age`岁。

```{r}
vars_sel <- c("id","age",  "age_scaled")
training_prepared %>%
  select(one_of(vars_sel)) %>%
  head(500) %>%
  datatable(options = list(pageLength = 5 , dom = "tip")) %>%
  formatRound(columns = c(3), digits =4)
```

---

### 数据变换B：案例（年龄变量：标准化变换前后）

- 变换前年龄变量(`age`)的情况

```{r}

summary(training_prepared$age)
```

- **标准化**变换后年龄变量(`age_scaled`)的情况

```{r}
summary(training_prepared$age_scaled)
```

---

### 数据变换B：案例（标准化变换：批量处理）

对于数据集的数值型变量(age,income,num_veicles,gas_usage)，我们可以同时进行**标准化**变换。从而为下一步建模分析做准备：

```{r}
dataf <- training_prepared[, c("age", "income", "num_vehicles", "gas_usage")]

dataf_scaled <- scale(dataf, center=TRUE, scale=TRUE)
                                        
means <- attr(dataf_scaled, 'scaled:center')

sds <- attr(dataf_scaled, 'scaled:scale')


dataf_scaled %>%
  as_tibble() %>%
  head(500) %>%
  add_column(id = 1:nrow(.), .before = "age") %>%
  datatable(options = list(pageLength = 5 , dom = "tip")) %>%
  formatRound(columns = c(2:5), digits =4)
```

---

### 数据变换C：案例（收入变量：对数化变换）

下面我们进一步用**对数化**操作，对收入变量进行变换
$Ln\_income= log_{10}{(income_i)}$。

```{r}
vars_sel <- c("id","income",  "Ln_income")
training_prepared %>%
  select(one_of(vars_sel)) %>%
  head(500) %>%
  datatable(options = list(pageLength = 5 , dom = "tip")) %>%
  formatRound(columns = c(3), digits =4)
```

---

### 数据变换C：案例（收入变量：对数化变换前后）

- 变换前收入变量(`income`)的情况

```{r}

summary(training_prepared$income)
```

- **对数化**变换后收入变量(`Ln_income`)的情况

```{r}
summary(training_prepared$Ln_income)
```

---

### 数据变换C：案例（收入变量：对数化变换前的分布）

变换前收入变量(`income`)的分布情况：

```{r}
training_prepared %>%
  ggplot(aes(x= income)) +
  geom_density() +
  labs(x="income（年收入）", y= "密度")
  
```

---

### 数据变换C：案例（收入变量：对数化变换后的分布）

**对数化**变换后收入变量(`Ln_income`)的分布情况：

```{r, warning=FALSE, message=FALSE}

training_prepared %>%
  ggplot(aes(x= Ln_income)) +
  geom_density() +
  labs(x="Ln_income（年收入）", y= "密度")

```

---

### 数据变换D：案例（年龄连续变量：变换为分类变量）

我们可以把年龄(age)**连续变量**，变换为**分类变量**(age_range和age_cat)。其中分割依据为`brks <- c(0, 18,45, 65, Inf)`。

```{r}
brks <- c(0, 18,45, 65, Inf)

training_prepared <- training_prepared %>%
  mutate(age_range = cut(age, breaks = brks, include.lowest = T),
         age_cat = cut(age, breaks = brks, include.lowest = T, labels = FALSE))

vars_sel <- c("id","age",  "age_range", "age_cat")
training_prepared %>%
  select(one_of(vars_sel)) %>%
  head(500) %>%
  datatable(options = list(pageLength = 5 , dom = "tip")) 

```



---

### 数据子集：清单

**数据子集**（data subset）是对数据集进行抽样（sampling）的过程，形成的数据子集一般用于后续的建模分析。

- 训练集（training subset）：主要用于参数估计，得到一个最终的估计模型。

- 测试集（test subset）：主要用于对估计模型的预测准确性进行评估。

---

### 数据子集：训练集和测试集

```{r}
include_graphics("../pic/chpt03-test_train_split.png",dpi =90)
```

---

### 数据子集：案例（设置样本数量）

```{r}
set.seed(25643)
customer_data <- customer_data %>%
  mutate(gp =round(runif(nrow(.)),2))
pct <- 0.1

customer_test <- subset(customer_data, gp <= pct)
customer_train <- subset(customer_data, gp > pct)

n_all <- nrow(customer_data)
n_test <- nrow(customer_test)

n_train <- nrow(customer_train)

```

对全部数据集`custom_data`（样本数n=`r n_all`），我们可以生成名为`gp`的新列，采用[0,1]的**均匀随机分布**（uniform distribution），对应的R函数为`runif(n)`



假定我们希望数据子集的容量分别为：

- **训练集**样本数
$n_{train} =$ `r percent(1-pct)` X `r n_all` =`r n_train`个。

- **测试集**样本数
$n_{train} =$ `r percent(pct)` X `r n_all` =`r n_test`个。


---

### 数据子集：案例（全部数据）

这是全部数据集：

```{r}
vars_sel <- c("id","gp","age", "income", "num_vehicles", "gas_usage")
customer_data %>%
  select(one_of(vars_sel)) %>%
  head(500) %>%
  datatable(caption = str_c("全部数据样本量n=", n_all),
            options = list(pageLength = 5 , dom = "tip")) 

```

---

### 数据子集：案例（训练集）

这是训练集：

```{r}
vars_sel <- c("id","gp","age", "income", "num_vehicles", "gas_usage")
customer_train %>%
  select(one_of(vars_sel)) %>%
  head(500) %>%
  datatable(caption = str_c("训练集-样本量n=", n_train),
            options = list(pageLength = 5 , dom = "tip")) 

```

---

### 数据子集：案例（测试集）

这是测试集：

```{r}
vars_sel <- c("id","gp","age", "income", "num_vehicles", "gas_usage")
customer_test %>%
  select(one_of(vars_sel)) %>%
  head(500) %>%
  datatable(caption = str_c("测试集-样本量n=", n_test),
            options = list(pageLength = 5 , dom = "tip")) 

```

---

### 数据子集：按所在州等比例随机抽取

下面我们抽取数据集的10%作为子集，其中要求按所在州（`state_of_res`）来等比例分配：

```{r}
vars_sel <- c("id","state_of_res","age", "sex","income")

spl_state <- customer_data %>%
  select(one_of(vars_sel)) %>%
  group_by(state_of_res) %>%
  sample_frac(0.1) %>%
  arrange(id) 

spl_state %>%
  datatable(caption = str_c("数据样本量n=", nrow(.)),
    options = list(pageLength = 5, dom = "tip"))

```

---

### 数据子集：按所在州等比例随机抽取



.pull-left[

**抽取前**的所在州样本分布：

```{r}
  customer_data %>%
  select(one_of(vars_sel)) %>%
  group_by(state_of_res) %>%
   summarize(n=n()) %>%
  datatable(caption = str_c("全部数据-样本量n=", nrow(customer_data)),
    options = list(pageLength = 5, dom = "tip"))
```

]

.pull-right[

按每个州**抽取后**的所在州样本分布：

```{r}
  customer_data %>%
  select(one_of(vars_sel)) %>%
  group_by(state_of_res) %>%
  sample_frac(0.1) %>%
  #head(500) %>%
  arrange(id) %>%
  summarize(n=n()) %>%
  datatable(caption = str_c("抽取后-数据样本量n=", nrow(spl_state)),
    options = list(pageLength = 5, dom = "tip"))
 
```

]


---
layout: false
class: inverse, center, middle, duke-softblue
name: quality

# 3.2 品质数据的整理与展示

- 3.2.1 分类数据的整理与图示

- 3.2.2 顺序数据的整理与图示



---
layout: true

<div class="my-header-h2"></div>

<div class="watermark1"></div>

<div class="watermark2"></div>

<div class="watermark3"></div>

<div class="my-footer"><span>huhuaping@  &emsp;&emsp; <a href="#chapter02"> 第03章 数据的图表展示 </a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
<a href="#quality"> 3.2 品质数据的整理与展示 </a> </span></div> 

---

## 分类数据：整理与图示的基本过程



- 列出各类别

- 分类数据的整理与图示

- 制作频数分布表

- 用图形显示数据

---

## 分类数据：计算统计量并制表

- 频数(frequency) ：落在各类别中的数据个数

- 比例(proportion)：某一类别数据个数占全部数据个数的比值

- 百分比(percentage) ：将对比的基数作为100而计算的比值

- 比率(ratio) ：不同类别数值个数的比值


---

### （案例）饮料销售：原始数据

一家市场调查公司为研究不同品牌饮料的市场占有率，对随机抽取的一家超市进行了调查。调查员在某天对50名顾客购买饮料的品牌进行了记录，如果一个顾客购买某一品牌的饮料，就将这一饮料的品牌名字记录一次。

下边就是记录的原始数据：


```{block, type='notes', echo=T}

待完成：提供一张xls形态的原始数据表。

```

---

### （案例）饮料销售：列出类别

根据原始数据，我们可以整理并列出所有类别：

```{block, type='notes', echo=T}

待完成：整理并列出所有类别表。

```

---

### （案例）饮料销售：计算统计量

对各类别进行统计量的计算，并得到如下分配数据表：

```{block, type='notes', echo=T}

待完成：对各类别进行统计量的计算，并得到分配数据表。

```


---

## 分类数据：统计制图1（条形/柱状图）

条形/柱状图（bar Chart）：用宽度相同的条形的高度或长短来表示各类别数据的图形。

作用：主要用于反映分类数据的频数分布

绘图形式：

1. 单式条形图

2. 复式条形图
    - 分类变量在不同时间或不同空间上有多个取值
    - 对比分类变量的取值在不同时间或不同空间上的差异或变化趋势

绘制要点：

- 各类别可以放在纵轴，称为条形图(bar Chart)

- 也可以放在横轴，称为柱形图(column chart)

---

### （案例）饮料销售：绘制柱状图

根据分配数据表，我们可以绘制出如下柱状图：

```{block, type='notes', echo=T}

待完成：根据分配数据表，绘制一张柱状图。

```

---

### （案例）饮料销售：绘制条形图

根据分配数据表，我们可以绘制出如下条形图：

```{block, type='notes', echo=T}

待完成：根据分配数据表，绘制一张条形图。

```

---

## 分类数据：统计制图1（条形/柱状图）

思考：什么时候适合使用柱状图？什么时候适合使用条形图？

```{block, type='notes', echo=T}

待完成：找到新数据，绘制一张条形图，但其不适合制作柱状图。

```

---

## 分类数据：统计制图1（饼图）

饼图（pie Chart）：也称圆形图，是用圆形及圆内扇形的角度来表示数值大小的图形。

用途：主要用于表示样本或总体中各组成部分所占的比例，用于研究结构性问题。

绘制要点：

- 样本或总体中各部分所占的百分比用圆内的各个扇形角度表示

- 这些扇形的中心角度，按各部分数据百分比乘以3600确定

---

### （案例）饮料销售：绘制饼图

根据分配数据表，我们可以绘制出如下饼图：

```{block, type='notes', echo=T}

待完成：根据分配数据表，绘制一张饼图。

```

---

## 顺序数据：计算的统计量

累积频数(cumulative frequencies)：各类别频数的逐级累加。

累积频率(cumulative percentages)：各类别频率(百分比)的逐级累加。

向上/向下累积：


---

## （案例）住房满意度：原始数据

在一项城市住房问题的研究中，研究人员在甲乙两个城市各抽样调查300户，其中的一个问题是：

```
您对您家庭目前的住房状况是否满意？

1.非常不满意；2.不满意；3.一般；4.满意；5.非常满意

```

下边就是记录的原始数据：


```{block, type='notes', echo=T}

待完成：提供一张xls形态的原始数据表。

```

---

## （案例）住房满意度：计算统计量并制表


根据上述原始数据，计算相关统计量：


```{block, type='notes', echo=T}

待完成：提供一张统计量计算的数据表。

```


---

## 顺序数据：统计制图（环形图）

环形图(doughnut chart)：环形图中间有一个“空洞”，样本或总体中的每一部分数据用环中的一段表示。

用途：用于结构比较研究；用于展示分类和顺序数据。

与饼图的联系与区别：

- 饼图只能显示一个总体各部分所占的比例。

- 环形图则可以同时绘制多个样本或总体的数据系列，每一个样本或总体的数据系列为一个环。

---

## （案例）住房满意度：绘制环形图

根据上述计算统计量和制表，绘制如下环形图：

```{block, type='notes', echo=T}

待完成：提供一张环形图。

```


---
layout: false
class: inverse, center, middle
name: quantity

# 3.3 数值型数据的整理与展示



---
layout: true

<div class="my-header-h2"></div>

<div class="watermark1"></div>

<div class="watermark2"></div>

<div class="watermark3"></div>

<div class="my-footer"><span>huhuaping@  &emsp;&emsp; <a href="#chapter02"> 第03章 数据的图表展示 </a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
<a href="#quantity"> 3.3 数值型数据的整理与展示 </a> </span></div> 

---

## 数据分组：概念和作用


概念：把同质总体中的具有不同特点的单位分开，从而正确地认识事物的本质及其规律性。 

作用：

- 类型分组：揭露社会经济现象的类型，反映各类型的特点。

- 结构分组：说明社会经济现象的内部结构。 

- 分析分组：研究经济现象之间的依存关系。

---

## 数据分组：选择分组标志

选择分组标志的原则和方法:

原则：

- 科学性

- 完备性 

- 互斥性 

方法：

- 根据研究问题的目的来选择

- 要选择最能反映被研究现象本质特征的标志 

- 要结合现象所处的具体历史条件或经济条件来选择

---

## 数据分组：数据分组类型

按分组标志的特征分：

- 品质标志分组：反映事物属性差异 
    a. 简单分组：如人口按性别分组。
    b. 复杂分组：如人口按职业分组。

- 数量标志分组 ：反映事物数量差异
    a. 单项式数量分组：运用于变量变动幅度小、项目少的分组。
    b. 组距式分组：运用于变量变动幅度大、项目多的分组。

按总体所选择标志的个数分：

- 单一分组：按一个标志对总体进行分组。

- 复合分组：按两个或两个以上标志对同一总体进行分组。

---

## （示例）数据分组类型：按数量标志分组


```{block, type='notes', echo=T}

待完成：提供单项式分组和组距式分组。

```

---

## （示例）数据分组类型：按分组标志个数


```{block, type='notes', echo=T}

待完成：提供单一分组和复合分组。

```

---

## 分配数列：概念和类型

分配数列：统计总体按照某一标志分组以后，用以反映总体各单位分配情况的统计数列，称为分配数列，又可称次数分配或次数分布。

- 品质型分配数列：

- 数值型分配数列：

    a. 单项变量数列：按每个变量值分别列组编制数列，适用于不连续变量或变量能以整数表示，其变动范围不大时。 
    b. 组距变量数列：按组距分组编制数列。适用于连续变量或变量可用小数表示，其变动范围。

---

## （示例）分配数列的类型：数值型分配数列


```{block, type='notes', echo=T}

待完成：提供两个数值型分配数列。

```

---

## 组距式数据分组：类型

- 按两端组是否开口分：

    - 开口式分组：最小组与最大组不封口。

    - 闭口式分组：所有组都有明确上限和下限。

- 按组距是否为等距分：

    - 等距式分组：所有分组的组距全部相等。

    - 异距式分组：各个分组组距不是完全相等。

---

## 组距式数据分组：重要概念

- 组数（bins）：数据分组的总组数。

- 组限（limits）：组距两端的数值。分为上限和下限。 

    a. 下限(lower limit) ：一个组的最小值。
    
    b. 上限(upper limit) ：一个组的最大值。

- 组距（width） ：某组的上限与下限之差。

- 组中值(class midpoint) ：某组的下限与上限之间的中点值

- 全距（range）：整个分组数列中，最大组**上限**与最小组**下限**之差。

- 最大组/最小组：整个分组数列中，分组标志数值最大/最小的那一组。

---

## 组距式数据分组：分组步骤


- 确定组数：组数的确定应以能够显示数据的分布特征和规律为目的。在实际分组时，组数一般为
$5\leq K \leq 15$。

- 确定组距：组距是一个组的上限与下限之差，可根据全部数据的最大值和最小值及所分的组数来确定。

$$组距＝\frac{(最大值 - 最小值)}{组数}$$

- 确定组限。对于连续变量分组，各组之间的组限也要连续。对于不连续变量分组，组与组之间的组限往往是间断的。此外，在同一个组距数列中，组限标准保持一致。


- 统计出各组的频数并整理成频数分布表。在登记次数时，应遵守：

    - 上组限不在内：适用于越大越好的变量，如产值。
    
    - 下组限不在内：适用于越小越好的变量，如成本。

---

## 组距式数据分组：组中值的计算

- 闭口式分组的组中值求法：

$$\begin{align}
\text{组中值} &= \frac{\text{组上限}+\text{组下限}}{2}\\
&= 组下限 + \frac{\text{组上限}-\text{组下限}}{2} \\
&= 组上限 - \frac{\text{组上限}-\text{组下限}}{2} 
\end{align}$$


- 开口式分组的组中值求法：

$$\begin{align}
\text{下开口组的组中值} &= 组上限 - \frac{\text{邻组组距}}{2}\\
\text{上开口组的组中值} &= 组下限 + \frac{\text{邻组组距}}{2}
\end{align}$$

---

## （示例）组距式数据分组：计算组中值


```{block, type='notes', echo=T}

待完成：分别提供一个上开口和下开口组距式分配数列，并分别计算开口组的组中值。

```

---

## 组距式数据分组：计算统计量1

在**等距分组**下，我们可以直接计算较小/较大累计次数/频率分布：

- 较小制累计（以下累计、向上累计）：即（上限）以下累计次数，每一组的累计次数表示小于该组上限（变量）值的次数/频率共有多少。

- 较大制累计（以上累计、向下累计）：即（下限）以上累计次数：每一组的累计次数表示大于该组下限（变量）值的次数/频率共有多少。

在**异矩分组**下，我们需要进一步计算各组的**组密度**以及**标准组距分布**：

.pull-left[

$$\begin{align}
\text{次数密度} &= \frac{\text{各组次数}}{各组组距}\\
\text{频率密度} &= \frac{\text{各组频率}}{各组组距}
\end{align}$$

]

.pull-right[

$$\begin{align}
\text{标准组距次数分布} &= \frac{\text{各组次数}}{标准化组距}\\
\text{标准组距频率分布} &= \frac{\text{各组频率}}{标准化组距}
\end{align}$$

]

---

## （示例）等距式分配数列：计算累计次数/频率

对于等距式分组情形，我们可以分别计算出较小/较大累计次数/频率：

```{block, type='notes', echo=T}

待完成：分别提供一个等距分组下，较小制和较大制组距分配数列。

```

---

## （示例）等距式分配数列：计算各组次数/频率密度

对于等距式分组情形，我们可以分别计算出较小/较大累计次数/频率：

```{block, type='notes', echo=T}

待完成：提供一个异距分组下，计算各组标准化组距次数和频数密度。

```

---

## 数据分组：统计制表

对分组数据进行统计制表，也即即用统计表来表示次数/频率等统计量在各组的分布情况，主要包括。

- **频数表**/**百分数表**（已经展示，见前面slide）

- **累计次数表**/**累计百分数表**（已经展示，见前面slide）

- **交叉分析表**，又成为交叉列联表（cross-table），是对复合式分组数列的频数或频率统计，便于对两个或多个分组标志（分组变量）关系的直接观察。数据交叉形式可以是：

    - 品质变量VS品质变量
    - 品质变量VS数值变量（较少用*）
    - 数值变量VS数值变量（较少用*）

.footnote[注释：\* 除非数值变量进行了分组]

---

## （示例）数据分组的制表：交叉分析表

对于复合式分组情形，我们可以根据需要绘制出**交叉分析表**（列联表）：

```{block, type='notes', echo=T}

待完成：提供复合分组下的交叉分析表（频率和频次）。

case of Home Sales in Gotham City 。

```

---

## （示例）数据分组的制表：

**普森悖论**（Simpson's paradox）：在有些情形中，依据从综合的交叉列联表中得出的结论可能与依据未综合数据得出的结论截然相反。这一现象就是著名的辛普森悖论。


```{block, type='notes', echo=T}

待完成：

case of Verdict between Kendall and Luckett. [see link](https://www.britannica.com/topic/Simpsons-paradox)

Simpson’s Paradox: Two HR examples with R code. [see link](https://paulvanderlaken.com/2017/09/27/simpsons-paradox-two-hr-examples-with-r-code/)

```

---

## 数据分组：统计制图

分组数列的图示方法，也即用统计图形来表示频数/频率在各组的分布情况，主要包括的图形类型有：

a. 条形/柱状图[已讲，见前面slide]

b. 折线图（line chart）

c. 曲线图

---

## 数据未分组：分布形态

.pull-left[
典型分布形态：

- 正态分布，也称正态曲线 

- 偏态分布，或称偏态曲线

]

.pull-right[

其他分布形态：

- U型分布

- 双峰分布

- J型分布

- 反J型分布

]

```{block, type='notes', echo=T}

待完成：提供示例图形，给出代表分布类型示例。

```

---

## 数据未分组：刻画分布形态量1（偏度系数）

**偏度（Skewness）系数**：分布形态的一个重要衡量标准就是分布偏度。一组数据分布偏度的计算是复杂的，但使用统计软件可以很容易的计算出偏度系数。偏度系数
$SK$的理论计算公式如下：


$$\begin{align}
SK = \frac{n}{(n-1)(n-2)} \sum_1^n{\left(\frac{X_i-\bar{X}}{S_X}\right)^3}
\end{align}$$

> 其中：
$n$表示样本数；
$S_X$表示样本标准差
$S_X =\sqrt{\frac{\sum_1^n{(X_i- \bar{X})^2}}{n-1}}$。

- 若偏度系数
$SK = 0$，则数据分布是对称的（无偏的），此时均值
和中位数相等，也即：
$\bar{X} = M_e$。

- 若偏度系数
$SK < 0$，则数据分布是非对称的（左偏的），此时均值小于中位数，也即：
$\bar{X} < M_e$。

- 若偏度系数
$SK > 0$，则数据分布是非对称的（左偏的），此时均值大于中位数，也即：
$\bar{X} > M_e$。

---


## （示例）数据分布形态：对称分布


```{block, type='notes', echo=T}

待完成：提供数据，计算偏态系数，展示对称分布图形。

```

---


## （示例）数据分布形态：左偏


```{block, type='notes', echo=T}

待完成：提供数据，计算偏态系数，展示左偏分布图形。

```

---


## （示例）数据分布形态：右偏


```{block, type='notes', echo=T}

待完成：提供数据，计算偏态系数，展示右偏分布图形。

```


---

## 数据未分组：刻画分布形态2（峰度系数）

**峰度（Kurtosis）系数**：峰度刻画数据分布的拖尾长度和集中度。峰度系数
$KT$的理论计算公式如下：


$$\begin{align}
KT = \frac{n(n+1)}{(n-1)(n-2)(n-3)} \frac{\sum_{i=1}^n{(X_i-\bar{X})^4}}{S_X^4} - \frac{3(n-1)^2}{(n-2)(n-3)}
\end{align}$$

> 其中：
$n$表示样本数；
$S_X$表示样本标准差
$S_X =\sqrt{\frac{\sum_1^n{(X_i- \bar{X})^2}}{n-1}}$。

- 若峰度系数
$KT = 0$，则数据分布是**常峰态的**。

- 若峰度系数
$KT < 0$，则数据分布是**低峰态的**。

- 若峰度系数
$KT > 0$，则数据分布是**尖峰态的**。

---


## （示例）数据分布形态：常峰态


```{block, type='notes', echo=T}

待完成：提供数据，计算峰态系数，展示常峰态分布图形。

```

---


## （示例）数据分布形态：低峰态


```{block, type='notes', echo=T}

待完成：提供数据，计算峰态系数，展示常峰态分布图形。

```

---


## （示例）数据分布形态：尖峰态


```{block, type='notes', echo=T}

待完成：提供数据，计算峰态系数，展示尖峰态分布图形。

```

---

## 数据未分组：统计制表

```{block, type='notes', echo=T}

待完成：提供示例数据，介绍统计制表类型及技术。

```




---

## 数据未分组：统计制图1（茎叶图）

**茎叶图（stem and leaf diagrams）**：用于显示未分组的原始数据的分布。
由“茎”和“叶”两部分构成，其图形是由数字组成的，以该组数据的高位数值作树茎，低位数字作树叶，树叶上只保留最后一位数字。

茎叶图与**横直方图**的区别*：

- 直方图可观察一组数据的分布状况，但没有给出具体的数值。

- 茎叶图既能给出数据的分布状况，又能给出每一个原始数值，保留了原始数据的信息。

- 直方图适用于大批量数据，茎叶图适用于小批量数据。




.footnote[注释：\* 茎叶图曾经的优势（简单、可手工绘制）在今天这个计算机时代也显得并不突出，因此，除非特殊情况，建议主要使用直方图作为密度函数估计工具。[see link](https://msg-book.netlify.app/gallery.html#section-11)]

---

## （示例）数据未分组的制图：茎叶图



```{block, type='notes', echo=T}

待完成：提供示例数据，并绘制茎叶图。

Basic R Guide for NSC Statistics. [see link](https://bookdown.org/dli/rguide/stem-and-leaf-plot.html)

R – Stem and Leaf Plots. [see link](https://www.geeksforgeeks.org/r-stem-and-leaf-plots/)

```

---

## 数据未分组：统计制图2（箱线图）

**箱线图（box plot）**：用于显示未分组的原始数据的分布。由一组数据的5个特征值绘制而成，它由一个箱子和两条线段组成。箱线图也被称为Median/Quartile/Range箱线图。

绘制方法：

- 首先找出一组数据的5个特征值，即最大值（Max）、最小值（Min）、中位数
$M_e$和两个四分位数（下四分位数
$Q_L$和上四分位数
$Q_U$）。

- 连接两个四分位数画出箱子，再将两个极值点与箱子相连接。

图形分类：

- 单一箱线图

- 多批箱线图

---

## （示例）数据未分组的制图：单一箱线图



```{block, type='notes', echo=T}

待完成：提供示例数据，并绘制单一箱线图。

现代统计图形. [see link](https://msg-book.netlify.app/gallery.html#section-11)

```


---

## （示例）数据未分组的制图：多批箱线图



```{block, type='notes', echo=T}

待完成：提供示例数据，并绘制多批箱线图。

现代统计图形. [see link](https://msg-book.netlify.app/gallery.html#section-11)

```

---

## 数据未分组：统计制图3（直方图）

**直方图（histogram）**：用于展示分组数据分布的一种图形，用矩形的宽度和高度来表示频数分布。

- 本质上是用矩形的面积来表示频数分布。

- 在直角坐标中，用横轴表示数据分组，纵轴表示频数或频率，各组与相应的频数就形成了一个矩形。

直方图与柱状图的区别：

- 柱状图是用柱形的高度表示各类别频数的多少，其宽度（表示类别）则是固定的。

- 直方图是用面积表示各组频数的多少，矩形的高度表示每一组的频数或百分比，宽度则表示各组的组距，其高度与宽度均有意义。

- 直方图的各矩形通常是连续排列，柱状图则是分开排列。

- 柱状图主要用于展示分类/分组数据，直方图则主要用于展示数值型数据。



---

## （示例）数据未分组的制图：直方图（histogram）



```{block, type='notes', echo=T}

待完成：提供示例数据，并绘制直方图。

现代统计图形. [see link](https://msg-book.netlify.app/gallery.html#section-11)

```

---

## 数据未分组：统计制图4（线图）

**线图(line plot)**：主要用于表示时间序列数据趋势的图形。

绘制要点：

- 时间一般绘在横轴，数据绘在纵轴。

- 图形的长宽比例大致为`10:7`。

- 一般情况下，纵轴数据下端应从“0”开始，以便于比较。数据与“0”之间的间距过大时，可以采取折断的符号将纵轴折断。

---

## （示例）数据未分组的制图：线图



```{block, type='notes', echo=T}

待完成：提供示例数据，并绘制线图。

```


---

## 数据未分组：统计制图5（散点图）

**散点图（Scatter plots）**：展示**两个变量**之间的关系。用横轴代表变量
$X_i$，纵轴代表变量
$Y_i$，每组数据
$(X_i, Y_i)$在坐标系中用一个点表示，
$n$组数据在坐标系中形成的
$n$个点称为散点，由坐标及其散点形成的二维数据图。

---

## （示例）数据未分组的制图：散点图


```{block, type='notes', echo=T}

待完成：提供示例数据，并绘散点图。

Scatterplots and Best Fit Lines. [see links](https://bookdown.org/dli/rguide/scatterplots-and-best-fit-lines-single-set.html)

```


---

## 数据未分组：统计制图6（散点图）

**气泡图（bubble chart）**：显示**三个变量**之间的关系，
图中数据点的大小依赖于第三个变量。

---

## （示例）数据未分组的制图：气泡图


```{block, type='notes', echo=T}

待完成：提供示例数据，并绘气泡图。

```

---

## 数据未分组：统计制图7（雷达图）

**雷达图（radar chart）**：也称为蜘蛛图（spider chart），显示**多个变量**的图示方法。

用途：

- 在显示或对比各变量的数值总和时十分有用。

- 假定各变量的取值具有相同的正负号，总的绝对值与图形所围成的区域成正比。

- 可用于研究多个样本之间的相似程度。


---

## （示例）数据未分组的制图：雷达图


```{block, type='notes', echo=T}

待完成：提供示例数据，并绘雷达图。

4.23 星状图、蛛网图、雷达图. [see link](https://msg-book.netlify.app/gallery.html#sec:stars)

```

---
layout: false
class: inverse, center, middle
name: nice

# 3.4 合理使用图表


鉴别图形优劣的准则

统计表的设计

---
layout: true

<div class="my-header-h2"></div>

<div class="watermark1"></div>

<div class="watermark2"></div>

<div class="watermark3"></div>

<div class="my-footer"><span>huhuaping@  &emsp;&emsp; <a href="#chapter02"> 第03章 数据的图表展示 </a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
<a href="#nice"> 3.4 合理使用图表 </a> </span></div> 

---

## 良好图表应具备的基本特征


- 服务于一个明确的目的

- 显示数据

- 强调数据之间的比较

- 有对图表的统计描述和文字说明

- 让读者把注意力集中在图表的内容上，而不是制作图表的程序上

- 避免歪曲

---

## 鉴别图表优劣的准则

- 表述数据的真实情况

- 使复杂的观点得到简明、确切、高效的阐述

- 精心设计、有助于洞察问题的实质

- 能在最短的时间内以最少的笔墨给读者提供最大量的信息

- 多维度地对问题进行客观反映

---

## 制图常见误区：非零起始点1

```{r}
include_graphics("../pic/chpt03-mis-non-zero.png", error = FALSE)
```

---

## 制图常见误区：非零起始点2

```{r}
include_graphics("../pic/chpt03-mis-non-zero-com.png", error = FALSE)
```

---

## 制图常见误区：图片比例拉伸失调

```{r}
include_graphics("../pic/chpt03-mis-wrong-ratio.png", error = FALSE)
```

---

## 制图常见误区：炫技乱人心

```{r}
include_graphics("../pic/chpt03-mis-dispress.png", error = FALSE)
```

---

## 制图常见误区：视觉误导1

```{r}
include_graphics("../pic/chpt03-mis-vision-distort.png", error = FALSE)
```

---

## 制图常见误区：视觉误导2

```{r}
include_graphics("../pic/chpt03-mis-vision-distort-y.png", error = FALSE)
```

---

## 制图常见误区：目标不明确

```{r}
include_graphics("../pic/chpt03-mis-elements.png", error = FALSE)
```

---

## 图设计要点：饼图VS条形图？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-pie-or-bar.png", error = FALSE)
```

--

**点评**：一般来讲表述市场份额是100%，所以大家习惯用饼图表述，研究表明人们更习惯从条形图来比较大小，更醒目的看到差异！

---

## 图设计要点：线形图VS柱状图？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-line-or-bar.png", error = FALSE)
```

--

**点评**：选择下面的最重要的是X轴是时间，时间序列，所以折线图更能够感知的趋势、模式的变化！当然如果你表现的是不同品牌的市场份额，条形图或直方图也是可以的！

---

## 图设计要点：平面图VS立体图？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-2d-or-3d.png", error = FALSE)
```

--

**点评**：从简约的角度，显然二维图更适合人们观察，三维并不适合观察，因为大部分图表需要打印在平面，所以尽量用二维图，毕竟它是人类视觉空间的最低维度！另时序数据应该采用折线图表述趋势！

---

## 图设计要点：3D VS 2D？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-2d-or-3d-cont.png", error = FALSE)
```

--

**点评**：我们说了尽量不用用三维图，但是大家是不是会把信息按某个维度作出分散的二维图呢，一定注意要去掉后面图的纵坐标的Lable，否则是四张图，要贴成一张图！

---

## 图设计要点：颜色VS数据？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-color-or-data.png", error = FALSE)
```

--

**点评**：我们应该选下面的，如果选上面的打印都费墨，坚持简单是最好的；当然如果有艺术细胞的话，背景也是生动的，但是更多是考虑展示结果，如果最终要打印你就要考虑考虑啦！

---

## 图设计要点：选色VS选图？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-color-pie-and-bar.png", error = FALSE)
```

--

**点评**：比较是展示数据差异的好法子，但是如果你的读者不容易看出差别的话，那么你的比较就毫无意义。确保所有的数据都是呈现在读者面前,选择最合适的比较方法。

---

## 图设计要点：饼图-排序VS分块？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-pie.png", error = FALSE)
```

--

**点评**：理论上，一个饼图不应该分割超过5块。注意排序，最大一块12点钟开始,顺时针方向旋转。剩余部分再降序排列，顺时针。

---

## 图设计要点：线图-实线VS虚线？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-line-solid.png", error = FALSE)
```

--

**点评**：虚线容易分散注意力。相反,使用实线和颜色,反而容易区分彼此的区别。

---

## 图设计要点：条形图-排序数据VS名称？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-bar-order.png", error = FALSE)
```

--

**点评**：你的内容应该以一种合乎逻辑的和直观的方式来引导读者了解数据。所以，记得将数据类别按字母顺序、大小顺序、或数据值进行排序。

---

## 图设计要点：柱状图-宽度VS间距？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-bar-width.png", error = FALSE)
```

--

**点评**：或许你的报告很有创意，非常精彩，但是记得图表设计水平也要跟上。条形图之间的间隔应该是1/2栏宽度。

---

## 图设计要点：面积图-堆叠VS透明度？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-area-stacked.png", error = FALSE)
```

--

**点评**：确保没有数据丢失或被设计。例如,使用标准的面积图时，可以添加透明度,确保读者可以看到所有数据。

---

## 图设计要点：散点图-原始VS趋势？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-scatter-trend.png", error = FALSE)
```

--

**点评**：应该使图表尽可能轻松地帮助读者理解数据。例如,在散点图中添加趋势线来强调的趋势。

---

## 图设计要点：气泡图-形状VS数值？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-legend.png", error = FALSE)
```

--

**点评**：确保所有可视化方式是准确的。例如，气泡图大小应该根据区域扩展，而不是直径。

---

## 图设计要点：热力图-颜色堆VS颜色系？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-graph-heathop.png", error = FALSE)
```

--

**点评**：颜色用得太花，会给数据增加不可承受之重，相反，应该采用同一色系，或者类比色。

---

## 表设计要点：交叉表-封闭VS开放？

```{r, out.width= '850px'}
include_graphics("../pic/chpt03-table-close-or-open.png", error = FALSE)
```

--

**点评**：简约就是美，显然下面的更清晰明快！我们习惯采用中国式图表，一般都是封闭边框线的，但是我们如果经常看英文的论文，你会发现很多论文都是下面的图表！

---

## 表设计要点：交叉表-颜色VS线条？

```{r, out.width= '800px'}
include_graphics("../pic/chpt03-table-color-or-line.png", error = FALSE)
```

--

**点评**：我们应该选择上面的，因为网格线会让我们看不清晰。当然颜色也是非常重要的，记住条件格式的应用，要学会使用规则调色；当然细节也是非常重要的，比如字体、数值、对齐等格式问题！

---

## 统计报表：结构与内容

**从形式上看**：统计报表由总标题、横行标题、纵栏标题、指标数值构成。

**从内容上看**：统计报表由**主词**和**宾词**两部分构成。

- **主词**：说明总体或总体的分组。

- **宾词**：用哪些指标数值来说明总体或总体的分组。 

```{r}
include_graphics("../pic/chpt03-official-report-table-model.png", error = FALSE, dpi = 500)
```


---

## 统计报表：特点

- 开口式

- 上下有基线

- 编号：主词一般按A、B、C…，宾词按1、2、3…

- 有计量单位

- 表中不允许有空格：若不需要此资料则用“-”；暂缺某资料则用“……”

---

## 统计报表：设计准则

- 合理安排统计表的结构

- 总标题内容应满足3W要求（when/where/what）

- 数据计量单位相同时，可放在表的右上角标明，不同时应放在每个变量后或单列出一列标明

- 表中的上下两条横线一般用粗线，其他线用细线

- 表中的数据一般是右对齐，有小数点时应以小数点对齐，而且小数点的位数应统一

- 必要时可在表的下方加上注释

???

3W是指标题内容需要表明统计数据的时间（When）、地点（Where）以及何种数据（What）

---
layout:false
background-image: url("../pic/thank-you-gif-funny-fan.gif")
class: inverse,center
# 本章结束

